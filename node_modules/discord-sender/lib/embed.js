const fetch = require('axios')
function embed(channel, embed) {

const obj = JSON.parse(embed);
if (channel == "" || channel == undefined) throw new TypeError("Please Provide A Channel ID");
if (embed == "" || embed == undefined) throw new TypeError("Embed Is Undefined");
if (obj == "" || obj == undefined) throw new TypeError("JSON Format Error");

var color = obj.color;
var title = obj.title;
var url = obj.url;
var thumbnail = obj.thumbnail;
var author = obj.author;
var authorIcon = obj.authorIcon;
var authorUrl = obj.authorUrl;
var image = obj.image;
var description = obj.description;
/*title*/
if(color == "" || color == undefined){
  color = "&color=2C2F33"
}else {
  color = `&color=${color}`
}
if(title == "" || title == undefined){
  title = "";
}else {
  title = `&title=${title}`
}
/*url*/
if(url == "" || url == undefined){
  url = "";
}else {
  url = `&url=${url}`
}
/*thumbnail*/
if(thumbnail == "" || thumbnail == undefined){
  thumbnail = "";
}else {
  thumbnail = `&thumbnail=${thumbnail}`
}
/*author*/
if(author == "" || author == undefined){
  author = "";
}else {
  author = `&author=${author}`
}
/*authorIcon*/
if(authorIcon == "" || authorIcon == undefined){
  authorIcon = "";
}else {
  authorIcon = `&authorIcon=${authorIcon}`
}
/*authorUrl*/
if(authorUrl == "" || authorUrl == undefined){
  authorUrl = "";
}else {
  authorUrl = `&authorUrl=${authorUrl}`
}
/*image*/
if(image == "" || image == undefined){
  image = "";
}else {
  image = `&image=${image}`
}
/*description*/
if(description == "" || description == undefined){
  description = "";
}else {
  description = `&description=${description}`
}

/*fetch*/
fetch(`https://ws.is-a.dev/embed?channel=${channel}${title}${color}${url}${thumbnail}${author}${authorIcon}${authorUrl}${image}${description}`).catch(err =>{console.log(err)})
return ('Embed Send !')
}

module.exports = embed;